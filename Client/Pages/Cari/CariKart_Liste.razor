@page "/r_carilistef"

<h1>Cari Kartlar</h1>

<div>
    <button class="btn btn-primary" @onclick="(() => ModalManager.ModalService.Show<Cari_Ekle>())">Yeni Ekle</button>
</div>
<table class="table table-hover table-sm">
    <thead>
        <tr>
            <th scope="col">Ref</th>
            <th scope="col">Kodu</th>
            <th scope="col">Adı</th>

        </tr>
    </thead>
    <tbody>
        @if (cariler != null)
        {
@foreach (var item in cariler)
{
<tr>
    <td>@item.Logref</td>
    <td>@item.Kodu</td>
    <td>@item.Adi</td>

</tr>
}}

    </tbody>
</table>


@code
{ 

    [Inject]
    ModalManager ModalManager { get; set; }

    [Inject]
    NavigationManager navigation { get; set; }

    [Inject]
    HttpClient httpClient { get; set; }

    public List<CariKartDto> cariler { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await LoadCariler();
    }

    private async Task LoadCariler()
    {
        cariler = await httpClient.GetServiceResponseAsync<List<CariKartDto>>("/api/carikart/list");
    } 
}
